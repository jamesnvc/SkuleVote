- form_for :election, election, :url => {:action => (controller.action_name == "new" ? "create" : "update")} do |election|
	= election.error_messages
	%fieldset
		%legend Election
		
		%ol
			%li
				= election.label :name, "Election Name<em>*</em>"
				= election.text_field :name, :size => '25'
				

			%li
				= election.label :blurb 
				= election.text_area :blurb, :size => '40x5'

			%li
				= election.label :start 
				= election.datetime_select :start 

			%li
				= election.label :end 
				= election.datetime_select :end 

			%li
				= election.label :eligible_year 
				= election.text_field :eligible_year 

			%li
				= election.label :eligible_discipline 
				= election.text_field :eligible_discipline 
			
			%li
				= election.label :random 
				= election.check_box :random 

			%li
				= election.label :preferential 
				= election.check_box :preferential 
	
			%li
				=election.label :max_choices
				=election.text_field :max_choices, :size => 1
	%fieldset
		%legend Choices
		-#
			%ol
				-election.fields_for :choices do |choice|
					%li
						= choice.label :name
						= choice.text_field :name
		
		%ol#choices
			-@election.choices.each_with_index do |choice, index|
				= render :partial => 'choice', :locals => {:election => election, :choice => choice, :index => index}

		= render :partial => 'add_choice_link', :locals  => {:index => @election.choices.size }
	
	%p
		= election.submit (controller.action_name == "new" ? 'Create Election' : 'Update Election' )
		= link_to 'Cancel', :action => 'admin'

